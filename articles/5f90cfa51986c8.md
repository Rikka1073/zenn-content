---
title: "AWS EC2でReactアプリをデプロイする方法"
emoji: "💻"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["aws", "ec2"]
published: false
---

# はじめに

今回は AWS の EC2 を使って vite で作成した React のアプリをデプロイしていきます。最後に Route 53 で取得したドメインに React アプリが表示できるようにしていきます。

# 設定方法

まず初めに EC2 のインスタンスの起動時に必要なキーペアとセキュリティグループの設定を行います。

## キーペアの作成

EC2 インスタンスの ssh 接続に必要なキーペアの作成を行います。

- EC2 のメニューにネットワーク & セキュリティのキーペアをクリックします。

![](https://storage.googleapis.com/zenn-user-upload/6948cdf12504-20250323.png)

- `キーペアを作成`をクリックします。

![](https://storage.googleapis.com/zenn-user-upload/fb6c72f2b4a5-20250323.png)

- キーペアの設定画面が表示されるので詳細を入力します。今回入力する設定項目です。
  ![](https://storage.googleapis.com/zenn-user-upload/d37f6954bb8b-20250323.png)

| 項目                         | 値       | 説明                                 |
| ---------------------------- | -------- | ------------------------------------ |
| 名前                         | masafumi | SSH 接続に利用する鍵の名前           |
| キーペアのタイプ             | RSA      | SSH 接続で利用する暗号化アルゴリズム |
| プライベートキーファイル形式 | pem      | SSH 接続形式                         |

- 設定項目を入力したら`キーペアを作成`をクリックします。
  ![](https://storage.googleapis.com/zenn-user-upload/2fc211667b59-20250323.png)

- キーペアの一覧に名前のところで設定した値が表示されていたらキーペアの作成が完了しました。作成と同時に Edge や Chrome であれば自動でキーペアのダウンロードがされます。

![](https://storage.googleapis.com/zenn-user-upload/8ffd556706d3-20250323.png)

![](https://storage.googleapis.com/zenn-user-upload/30ecac18f6ff-20250323.png)

-　 SSH 接続に必要なファイルは一般的に`.ssh`に作成します。先ほどダウンロードしたキーペアを下記のコマンドで`.ssh`ディレクトリにコピーします。
`xxx`の部分はご自身のキーペア名を指定してください。

```
cp ./Downloads/xxxx.pem
```

- `.ssh`にキーペアが表示されていればコピーが完了です。

![](https://storage.googleapis.com/zenn-user-upload/ed5ff081b609-20250323.png)

## セキュリティグループの設定

セキュリティグループとは外部からのアクセスに制限をかける機能です。セキュリティグループではポート番号、IP アドレスの２つで制御することができます。

- セキュリティグループの設定を行なっていきます。
  今回入力する設定項目です。

| 項目                   | 値                                                   | 説明                                                                                           |
| ---------------------- | ---------------------------------------------------- | ---------------------------------------------------------------------------------------------- |
| セキュリティグループ名 | vite-react-app                                       | セキュリティグループにつける名前                                                               |
| 説明                   | vite-react-app server                                | セキュリティグループの対象や用途の説明                                                         |
| インバウンドルール     | タイプ:SSH ソース:0.0.0.0/0                          | タイプ:外部から接続を許可するプロトコルを設定　ソース:外部から接続を許可する IP アドレスを指定 |
| インバウンドルール     | タイプ:カスタム TCP ポート範囲:5173 ソース:0.0.0.0/0 | Vite のローカルホスト接続確認用                                                                |
| インバウンドルール     | タイプ:カスタム TCP ポート範囲:80 ソース:0.0.0.0/0   | nginx の接続確認用                                                                             |

- `基本的な詳細`を入力していきます。セキュリティグループ名は`vite-react-app`、説明には`vite-react-app server`、VPC は`デフォルト`を設定します。

![](https://storage.googleapis.com/zenn-user-upload/34125d3ad0bd-20250323.png)

- インバウンドルールにはアクセスを許可するポート番号を入力します。
  SSH 接続用にポート 22 を設定します。Vite のローカルホスト接続用にポート 5173 を設定します。 nginx の接続確認用にポート 80 を設定します。

![](https://storage.googleapis.com/zenn-user-upload/707f66a11666-20250323.png)

- セキュリティグループを作成をクリックします。

![](https://storage.googleapis.com/zenn-user-upload/7d8566e90f97-20250323.png)

- 作成したセキュリティグループ名が表示されていれば完了です。

![](https://storage.googleapis.com/zenn-user-upload/e326cd526ef2-20250323.png)

## EC2 インスタンスの作成

EC2 インスタンスの設定を行なっていきます。
今回入力する設定項目です。

| 項目                                    | 値                    | 説明                                             |
| --------------------------------------- | --------------------- | ------------------------------------------------ |
| 名前                                    | vite-react-app        | EC2 インスタンスの名前                           |
| Amazon マシンイメージ（AMI）            | Amazon Linux 2023 AMI | EC2 インスタンスに導入する OS                    |
| インスタンスタイプ                      | t2.micro              | EC2 インスタンスのスペック                       |
| キーペア (ログイン)                     | masafumi.pem          | EC2 インスタンスに接続するときに使用するキーペア |
| ファイアウォール (セキュリティグループ) | vite-react-app        | EC2 インスタンスに適用するセキュリティグループ   |

- インスタンスを起動をクリックします
  ![](https://storage.googleapis.com/zenn-user-upload/1848e76136d7-20250323.png)

- 設定画面が表示されるので詳細を入力していきます。
  まずインスタンス名を入力します。今回は`vite-react-app`とします。

![](https://storage.googleapis.com/zenn-user-upload/7b99ec6cd1b9-20250323.png)

- `AMI`を選択します。`Amazon Linux 2023 AMI`を選択します。
  AWS 環境でサーバーを運用する場合は`Linux`が適しています。特別に理由がない場合は`Linux`を選択してください。

![](https://storage.googleapis.com/zenn-user-upload/99412e4de982-20250323.png)

- インスタンスタイプは`t2.micro`を選択します。

![](https://storage.googleapis.com/zenn-user-upload/8d0eaa401074-20250323.png)

- 先ほど設定したキーペアを選択します。

![](https://storage.googleapis.com/zenn-user-upload/c735cf228ab4-20250323.png)

- ファイアウォール (セキュリティグループ)は`既存のセキュリティグループを選択する`、共通のセキュリティグループは事前に作成した`vite-react-app`を選択します。

![](https://storage.googleapis.com/zenn-user-upload/639cee3a7ccd-20250323.png)

- ここまで入力完了したらインスタンスを起動をクリックします。

![](https://storage.googleapis.com/zenn-user-upload/f5fdd924b421-20250323.png)

- インスタンスの管理画面に戻り数秒するとインスタンスの状態が実行中になっていればインスタンスの設定が完了です。

![](https://storage.googleapis.com/zenn-user-upload/4d8dc9f9d926-20250323.png)

## EC2 インスタンスの SSH 接続

EC2 インスタンスを作成しましたがまだ Web サーバーに接続できていません。SSH で Web サーバーに接続します。

- ssh コマンドを使ってサーバーに接続します。@以降に自身の IP アドレスを入力してください。

```
ssh -i ~/.ssh/masafumi.pem ec2-user@57.181.34.248
```

- IP アドレスは下記から確認できます。`インスタンス ID`をクリックします。

![](https://storage.googleapis.com/zenn-user-upload/9b7fbfe41fec-20250324.png)

- `パブリック IPv4 アドレス`の内容をコピーして ssh コマンドの@以降に貼り付けてください。

![](https://storage.googleapis.com/zenn-user-upload/69c57998f79d-20250324.png)

- 初めてインスタンスを起動する際は以下のようなメッセージが表示されます。

```
The authenticity of host '57.181.34.248 (57.181.34.248)' can't be established.
ED25519 key fingerprint is SHA256:aN5bOSqSsRj570x9W97PibuaFhF+PxlLCs2DvtRLw98.
This host key is known by the following other names/addresses:
    ~/.ssh/known_hosts:22: 57.181.34.248
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
```

- `yes`を押して`Amazon Linux 2023`が表示されていれば ssh 接続の完了です。

```
Warning: Permanently added '57.181.34.248' (ED25519) to the list of known hosts.
   ,     #_
   ~\_  ####_        Amazon Linux 2023
  ~~  \_#####\
  ~~     \###|
  ~~       \#/ ___   https://aws.amazon.com/linux/amazon-linux-2023
   ~~       V~' '->
    ~~~         /
      ~~._.   _/
         _/ _/
       _/m/'

```

## nginx のインストールとセットアップ

EC2 インスタンスを起動しただけでは React のアプリを公開することができません。Web サーバー上で HTTP リクエストを受け付ける必要があります。今回は `Nginx` を使った方法で作成します。

- 以下のコマンドで`Nginx`をインストールします。

```
sudo yum update -y
sudo yum install nginx -y
```

- 以下のコマンドでバージョンが表示されればインストールの完了です。

```
nginx -v
# nginx version: nginx/1.26.3
```

- 以下のコマンドで`Nginx`を起動します。

```
sudo systemctl start nginx
```

- `パブリック IPv4 アドレス`か`パブリック IPv4 DNS`にブラウザからアクセスします。

![](https://storage.googleapis.com/zenn-user-upload/1bc0ed5e15be-20250324.png)

- 以下のように`Nginx`のデフォルトページが表示されていれば完了です。

![](https://storage.googleapis.com/zenn-user-upload/7fb1cdc4136c-20250324.png)
